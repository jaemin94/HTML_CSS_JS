<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <script>
        // 콜백함수(call back)
        // 함수를 호출하는 시간이 바뀌어진 형태의 함수
        // 기존방식 : 사용자(개발자)가 함수를 직접정의 하고 정의된 함수를 호출하여 결과를 반환받는 방식
        // 콜백함수 : 콜백함수에 인자로 로직이 담긴 함수를(함수주소) 를 전달하여 콜백함수로부터 전리된 결과를 반환받는 방식

        // // 기본방식
        // function func(n1,n2){
        //     const result = n1+n2;
        //     return result;
        // };
        // const r = func(10,20); // Call
        // console.log(r);

        // // 콜백함수 사용법
        // function callbackfunc(n1,n2,logicfunc){ // logicfunc은 callbackfunc에서 사용되는 로직이 담긴 함수
        //     const r = logicfunc(n1,n2);
        //     return r;
        // };
        // function sum(n1,n2){
        //     return n1+n2;
        // };
        // function sub(n1,n2){
        //     return (n1>n2) ? n1-n2 : n2 -n1;
        // };

        // const r2 = callbackfunc(11,21,sum);
        // console.log(r2);
        // const r3 = callbackfunc(12,22,sub);
        // console.log(r3);

        // ------------------------------------------------------------------------------

        // const data = [11,20,31,40,51];

        // function callbackfunc(data,func){
        //     return func(data);
        // };

        // function sum(data){
        //     return data.reduce((sum,item)=>sum+item,0)
        // };

        // function mul(data){
        //     return data.reduce((mul,item)=>mul*item,1)
        // };

        // function FilterEvenArr(data){  
        //     return data.filter( (item)=>item%2==0 )
        // };

        // const val1 = callbackfunc(data,sum);
        // console.log(val1);
        // const val2 = callbackfunc(data,mul);
        // console.log(val2);
        // const r_arr = callbackfunc(data,FilterEvenArr);
        // console.log(r_arr);

        // 문제
        function callbackfunc(func1,func2,func3,...args){
            const arr1 = func1(args);   // 가변인자를 받아서 그 배열요소중 숫자만 필터링된 배열 반환
            console.log("숫자필터링된 배열 : " + arr1);
            const arr2 = func2(arr1);   // 숫자만 필터링된 배열중 짝수만 걸러서 배열로 반환
            console.log("짝수만 필터링된 배열 : " + arr2);
            const arr3 = func3(arr2);   // 짝수로 걸러진 배열의 합을 구함
            return arr3;
        };

        function proc1(arr){return arr.filter((item)=>typeof item == 'number')}; // 가변인자 배열중 숫자만 필터링된 배열 반환
        function proc2(arr){return arr.filter((item)=>item%2==0)}; // 숫자중에 짝수만 필터링된 배열 반환
        function proc3(arr){return arr.reduce((sum,item)=>sum+item,0)}; // 짝수의 합을 반환

        const rval = callbackfunc(proc1,proc2,proc3,10,20,'true',11,152,999,24,'문자열',null,155,24);
        console.log(rval);
    </script>


</body>
</html>